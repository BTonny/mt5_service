services:
  mt5:
    build:
      dockerfile: Dockerfile
    container_name: mt5
    ports:
      - "5001:5001"  # Flask API
      - "5900:3000"  # VNC (optional, for remote desktop) - external port 5900 maps to internal 3000
    volumes:
      - ./config:/config
    env_file:
      - .env
    restart: unless-stopped
    environment:
      - MT5_API_PORT=5001
      - WINEARCH=win64
      - WINEPREFIX=/config/.wine
      - XDG_RUNTIME_DIR=/tmp/runtime-root
      - DISPLAY=:0
      - VNC_PASSWORD=${VNC_PASSWORD:-P@55word}

volumes:
  config:
    driver: local
